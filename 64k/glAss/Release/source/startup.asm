; Listing generated by Microsoft (R) Optimizing Compiler Version 13.00.9030 

	TITLE	misccode\startup.cpp
	.386P
include listing.inc
if @Version gt 510
.model FLAT
else
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
_DATA	SEGMENT DWORD USE32 PUBLIC 'DATA'
_DATA	ENDS
CONST	SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST	ENDS
_BSS	SEGMENT DWORD USE32 PUBLIC 'BSS'
_BSS	ENDS
$$SYMBOLS	SEGMENT BYTE USE32 'DEBSYM'
$$SYMBOLS	ENDS
_TLS	SEGMENT DWORD USE32 PUBLIC 'TLS'
_TLS	ENDS
;	COMDAT ??_C@_0N@CPEFLFDB@160?5x?5120?5?3?$CJ?$AA@
CONST	SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST	ENDS
;	COMDAT ??_C@_09FFLAMHDK@320?5x?5240?$AA@
CONST	SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST	ENDS
;	COMDAT ??_C@_09CGCPDLHM@400?5x?5300?$AA@
CONST	SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST	ENDS
;	COMDAT ??_C@_09PGMMNHMA@512?5x?5384?$AA@
CONST	SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST	ENDS
;	COMDAT ??_C@_09OMPCNDEM@640?5x?5480?$AA@
CONST	SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST	ENDS
;	COMDAT ??_C@_09LMNCLMA@800?5x?5600?$AA@
CONST	SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST	ENDS
;	COMDAT ??_C@_0L@KHKHJBNB@1024?5x?5768?$AA@
CONST	SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST	ENDS
;	COMDAT ??_C@_0L@BOLNMBPL@1152?5x?5864?$AA@
CONST	SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST	ENDS
;	COMDAT ??_C@_0L@HNOGOHFM@1280?5x?5720?$AA@
CONST	SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST	ENDS
;	COMDAT ??_C@_0M@PPEHOBIK@1280?5x?51024?$AA@
CONST	SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST	ENDS
;	COMDAT ??_C@_0BC@FEDLLBDO@1600?5x?51200?5?$CKgah?$CK?$AA@
CONST	SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST	ENDS
;	COMDAT ??_C@_0BJ@DIFCELEH@error?5?$CFd?5?$CIlasterror?$CJ?6?$CFs?6?$AA@
CONST	SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST	ENDS
;	COMDAT ??_C@_05MBDEGLCK@ERROR?$AA@
CONST	SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST	ENDS
;	COMDAT ??_C@_0BP@NAMCMGKC@Couldn?8t?5initialize?5soundcard?4?$AA@
CONST	SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST	ENDS
;	COMDAT ??_C@_0BG@DEHFMOHG@Couldn?8t?5load?5module?4?$AA@
CONST	SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST	ENDS
;	COMDAT _IsEqualGUID
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT _==
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ?memopen@@YAIPAD@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ?memclose@@YAXI@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ?memread@@YAHPAXHI@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ?memseek@@YAXIHC@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ?memtell@@YAHI@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ?StartupDialog@@YGHPAUHWND__@@IIJ@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ?upload_images@@YAXXZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ?Error@@YAXPAD@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT _WinMain@16
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
FLAT	GROUP _DATA, CONST, _BSS
	ASSUME	CS: FLAT, DS: FLAT, SS: FLAT
endif

INCLUDELIB MSVCRT
INCLUDELIB OLDNAMES

PUBLIC	?StartupFlags@@3JA				; StartupFlags
_BSS	SEGMENT
?StartupFlags@@3JA DD 01H DUP (?)			; StartupFlags
_BSS	ENDS
PUBLIC	?memopen@@YAIPAD@Z				; memopen
EXTRN	__imp__GlobalAlloc@8:NEAR
EXTRN	_intromusic:BYTE
; Function compile flags: /Ogty
; File d:\code\prj64k\glass (eventad)\misccode\startup.cpp
;	COMDAT ?memopen@@YAIPAD@Z
_TEXT	SEGMENT
_name$ = 8
?memopen@@YAIPAD@Z PROC NEAR				; memopen, COMDAT

; 56   : //	FILE *fp;
; 57   : 	MEMFILE *memfile;
; 58   : 	memfile = (MEMFILE *)GlobalAlloc( MEM_COMMIT, sizeof(MEMFILE) );

	push	8
	push	4096					; 00001000H
	call	DWORD PTR __imp__GlobalAlloc@8

; 59   : //	memfile->length = 3000000;
; 60   : 	memfile->data = (unsigned char *)&intromusic;

	mov	DWORD PTR [eax+4], OFFSET FLAT:_intromusic

; 61   : 	memfile->pos = 0;

	mov	DWORD PTR [eax], 0

; 62   : 	return (unsigned int)memfile;
; 63   : }

	ret	0
?memopen@@YAIPAD@Z ENDP					; memopen
_TEXT	ENDS
PUBLIC	?memclose@@YAXI@Z				; memclose
EXTRN	__imp__GlobalFree@4:NEAR
; Function compile flags: /Ogty
;	COMDAT ?memclose@@YAXI@Z
_TEXT	SEGMENT
_handle$ = 8
?memclose@@YAXI@Z PROC NEAR				; memclose, COMDAT

; 67   : 	MEMFILE *memfile = (MEMFILE *)handle;
; 68   : 	GlobalFree(memfile);

	mov	eax, DWORD PTR _handle$[esp-4]
	push	eax
	call	DWORD PTR __imp__GlobalFree@4

; 69   : }

	ret	0
?memclose@@YAXI@Z ENDP					; memclose
_TEXT	ENDS
PUBLIC	?memread@@YAHPAXHI@Z				; memread
; Function compile flags: /Ogty
;	COMDAT ?memread@@YAHPAXHI@Z
_TEXT	SEGMENT
_buffer$ = 8
_size$ = 12
_handle$ = 16
?memread@@YAHPAXHI@Z PROC NEAR				; memread, COMDAT

; 73   : 	MEMFILE *memfile = (MEMFILE *)handle;
; 74   : /*
; 75   : 	if (memfile->pos + size >= memfile->length)
; 76   : 		size = memfile->length - memfile->pos;
; 77   : */
; 78   : 	memcpy(buffer, (char *)memfile->data+memfile->pos, size);

	mov	edx, DWORD PTR _handle$[esp-4]
	mov	eax, DWORD PTR _size$[esp-4]
	push	ebx
	push	esi
	mov	esi, DWORD PTR [edx+4]
	push	edi
	add	esi, DWORD PTR [edx]
	mov	edi, DWORD PTR _buffer$[esp+8]
	mov	ecx, eax
	mov	ebx, ecx
	shr	ecx, 2
	rep movsd
	mov	ecx, ebx
	and	ecx, 3
	rep movsb

; 79   : 	memfile->pos += size;

	mov	ecx, DWORD PTR [edx]
	pop	edi
	add	ecx, eax
	pop	esi
	mov	DWORD PTR [edx], ecx
	pop	ebx

; 80   : 	return size;
; 81   : }

	ret	0
?memread@@YAHPAXHI@Z ENDP				; memread
_TEXT	ENDS
PUBLIC	?memseek@@YAXIHC@Z				; memseek
; Function compile flags: /Ogty
;	COMDAT ?memseek@@YAXIHC@Z
_TEXT	SEGMENT
_handle$ = 8
_pos$ = 12
_mode$ = 16
?memseek@@YAXIHC@Z PROC NEAR				; memseek, COMDAT

; 85   : 	MEMFILE *memfile = (MEMFILE *)handle;
; 86   : 
; 87   : 	if (mode == SEEK_SET) 

	mov	al, BYTE PTR _mode$[esp-4]
	test	al, al
	jne	SHORT $L20363

; 88   : 		memfile->pos = pos;

	mov	eax, DWORD PTR _pos$[esp-4]
	mov	ecx, DWORD PTR _handle$[esp-4]
	mov	DWORD PTR [ecx], eax

; 91   : //	else if (mode == SEEK_END)
; 92   : //		memfile->pos = memfile->length;
; 93   : /*
; 94   : 	if (memfile->pos > memfile->length)
; 95   : 		memfile->pos = memfile->length;
; 96   : */
; 97   : }

	ret	0
$L20363:

; 89   : 	else if (mode == SEEK_CUR) 

	cmp	al, 1
	jne	SHORT $L20365

; 90   : 		memfile->pos += pos;

	mov	eax, DWORD PTR _handle$[esp-4]
	mov	ecx, DWORD PTR [eax]
	mov	edx, DWORD PTR _pos$[esp-4]
	add	ecx, edx
	mov	DWORD PTR [eax], ecx
$L20365:

; 91   : //	else if (mode == SEEK_END)
; 92   : //		memfile->pos = memfile->length;
; 93   : /*
; 94   : 	if (memfile->pos > memfile->length)
; 95   : 		memfile->pos = memfile->length;
; 96   : */
; 97   : }

	ret	0
?memseek@@YAXIHC@Z ENDP					; memseek
_TEXT	ENDS
PUBLIC	?memtell@@YAHI@Z				; memtell
; Function compile flags: /Ogty
;	COMDAT ?memtell@@YAHI@Z
_TEXT	SEGMENT
_handle$ = 8
?memtell@@YAHI@Z PROC NEAR				; memtell, COMDAT

; 101  : 	MEMFILE *memfile = (MEMFILE *)handle;
; 102  : 	return memfile->pos;

	mov	eax, DWORD PTR _handle$[esp-4]
	mov	eax, DWORD PTR [eax]

; 103  : }

	ret	0
?memtell@@YAHI@Z ENDP					; memtell
_TEXT	ENDS
PUBLIC	?StartupDialog@@YGHPAUHWND__@@IIJ@Z		; StartupDialog
PUBLIC	??_C@_0N@CPEFLFDB@160?5x?5120?5?3?$CJ?$AA@	; `string'
PUBLIC	??_C@_09FFLAMHDK@320?5x?5240?$AA@		; `string'
PUBLIC	??_C@_09CGCPDLHM@400?5x?5300?$AA@		; `string'
PUBLIC	??_C@_09PGMMNHMA@512?5x?5384?$AA@		; `string'
PUBLIC	??_C@_09OMPCNDEM@640?5x?5480?$AA@		; `string'
PUBLIC	??_C@_09LMNCLMA@800?5x?5600?$AA@		; `string'
PUBLIC	??_C@_0L@KHKHJBNB@1024?5x?5768?$AA@		; `string'
PUBLIC	??_C@_0L@BOLNMBPL@1152?5x?5864?$AA@		; `string'
PUBLIC	??_C@_0L@HNOGOHFM@1280?5x?5720?$AA@		; `string'
PUBLIC	??_C@_0M@PPEHOBIK@1280?5x?51024?$AA@		; `string'
PUBLIC	??_C@_0BC@FEDLLBDO@1600?5x?51200?5?$CKgah?$CK?$AA@ ; `string'
EXTRN	__imp__EndDialog@8:NEAR
EXTRN	__imp__CheckDlgButton@12:NEAR
EXTRN	__imp__IsDlgButtonChecked@8:NEAR
EXTRN	__imp__SendDlgItemMessageA@20:NEAR
;	COMDAT ??_C@_0N@CPEFLFDB@160?5x?5120?5?3?$CJ?$AA@
CONST	SEGMENT
??_C@_0N@CPEFLFDB@160?5x?5120?5?3?$CJ?$AA@ DB '160 x 120 :)', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_09FFLAMHDK@320?5x?5240?$AA@
CONST	SEGMENT
??_C@_09FFLAMHDK@320?5x?5240?$AA@ DB '320 x 240', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_09CGCPDLHM@400?5x?5300?$AA@
CONST	SEGMENT
??_C@_09CGCPDLHM@400?5x?5300?$AA@ DB '400 x 300', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_09PGMMNHMA@512?5x?5384?$AA@
CONST	SEGMENT
??_C@_09PGMMNHMA@512?5x?5384?$AA@ DB '512 x 384', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_09OMPCNDEM@640?5x?5480?$AA@
CONST	SEGMENT
??_C@_09OMPCNDEM@640?5x?5480?$AA@ DB '640 x 480', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_09LMNCLMA@800?5x?5600?$AA@
CONST	SEGMENT
??_C@_09LMNCLMA@800?5x?5600?$AA@ DB '800 x 600', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0L@KHKHJBNB@1024?5x?5768?$AA@
CONST	SEGMENT
??_C@_0L@KHKHJBNB@1024?5x?5768?$AA@ DB '1024 x 768', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0L@BOLNMBPL@1152?5x?5864?$AA@
CONST	SEGMENT
??_C@_0L@BOLNMBPL@1152?5x?5864?$AA@ DB '1152 x 864', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0L@HNOGOHFM@1280?5x?5720?$AA@
CONST	SEGMENT
??_C@_0L@HNOGOHFM@1280?5x?5720?$AA@ DB '1280 x 720', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0M@PPEHOBIK@1280?5x?51024?$AA@
CONST	SEGMENT
??_C@_0M@PPEHOBIK@1280?5x?51024?$AA@ DB '1280 x 1024', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0BC@FEDLLBDO@1600?5x?51200?5?$CKgah?$CK?$AA@
CONST	SEGMENT
??_C@_0BC@FEDLLBDO@1600?5x?51200?5?$CKgah?$CK?$AA@ DB '1600 x 1200 *gah*', 00H ; `string'
; Function compile flags: /Ogty
CONST	ENDS
;	COMDAT ?StartupDialog@@YGHPAUHWND__@@IIJ@Z
_TEXT	SEGMENT
_hWnd$ = 8
_uMsg$ = 12
_wParam$ = 16
_lParam$ = 20
?StartupDialog@@YGHPAUHWND__@@IIJ@Z PROC NEAR		; StartupDialog, COMDAT

; 108  : 
; 109  : 	switch( uMsg ) {

	mov	eax, DWORD PTR _uMsg$[esp-4]
	sub	eax, 272				; 00000110H
	push	esi
	push	edi
	je	$L20381
	dec	eax
	jne	$L20559

; 130  : 			break;
; 131  : 
; 132  : 		case WM_COMMAND:
; 133  : 			switch( LOWORD(wParam) ) {

	movzx	eax, WORD PTR _wParam$[esp+4]
	dec	eax
	je	SHORT $L20422
	dec	eax
	jne	$L20559

; 142  : 					};
; 143  : 					break;
; 144  : 
; 145  : 				case IDCANCEL:
; 146  : 					StartupFlags = 0;
; 147  : 					EndDialog( hWnd, FALSE );

	mov	eax, DWORD PTR _hWnd$[esp+4]
	push	0
	push	eax
	mov	DWORD PTR ?StartupFlags@@3JA, 0		; StartupFlags
	call	DWORD PTR __imp__EndDialog@8
	pop	edi

; 148  : 					break;
; 149  : 
; 150  : 			};
; 151  : 			break;
; 152  : 		//case WM_
; 153  : 		default:
; 154  : 			//return DefDlgProc( hWnd, uMsg, wParam, lParam );
; 155  : 			break;
; 156  : 	};
; 157  : 
; 158  : 	return FALSE;

	xor	eax, eax
	pop	esi

; 159  : };

	ret	16					; 00000010H
$L20422:

; 134  : 				
; 135  : 				case IDOK: 
; 136  : 					{
; 137  : 						int r = SendDlgItemMessage( hWnd, IDC_RESOLUTION, LB_GETCURSEL, 0, 0 );

	mov	esi, DWORD PTR _hWnd$[esp+4]
	push	0
	push	0
	push	392					; 00000188H
	push	1001					; 000003e9H
	push	esi
	call	DWORD PTR __imp__SendDlgItemMessageA@20

; 138  : 						StartupFlags = 1<<r;
; 139  : 						if( !IsDlgButtonChecked( hWnd, IDC_FULLSCREEN ) ) StartupFlags |= STARTUP_WINDOWED;

	mov	edi, DWORD PTR __imp__IsDlgButtonChecked@8
	mov	ecx, eax
	mov	edx, 1
	shl	edx, cl
	push	1002					; 000003eaH
	push	esi
	mov	DWORD PTR ?StartupFlags@@3JA, edx	; StartupFlags
	call	edi
	test	eax, eax
	jne	SHORT $L20424
	or	DWORD PTR ?StartupFlags@@3JA, 8192	; StartupFlags, 00002000H
$L20424:

; 140  : 						if( IsDlgButtonChecked( hWnd, IDC_MUSIC ) ) StartupFlags |= STARTUP_MUSIC;

	push	1003					; 000003ebH
	push	esi
	call	edi
	test	eax, eax
	je	SHORT $L20425
	or	DWORD PTR ?StartupFlags@@3JA, 32768	; StartupFlags, 00008000H
$L20425:

; 141  : 						EndDialog( hWnd, FALSE );

	push	0
	push	esi
	call	DWORD PTR __imp__EndDialog@8
	pop	edi

; 148  : 					break;
; 149  : 
; 150  : 			};
; 151  : 			break;
; 152  : 		//case WM_
; 153  : 		default:
; 154  : 			//return DefDlgProc( hWnd, uMsg, wParam, lParam );
; 155  : 			break;
; 156  : 	};
; 157  : 
; 158  : 	return FALSE;

	xor	eax, eax
	pop	esi

; 159  : };

	ret	16					; 00000010H
$L20381:

; 110  : 	
; 111  : 		case WM_INITDIALOG:
; 112  : 			SendDlgItemMessage( hWnd, IDC_RESOLUTION, LB_ADDSTRING, 0, (LPARAM)(LPCSTR)"160 x 120 :)" );

	mov	esi, DWORD PTR _hWnd$[esp+4]
	mov	edi, DWORD PTR __imp__SendDlgItemMessageA@20
	push	OFFSET FLAT:??_C@_0N@CPEFLFDB@160?5x?5120?5?3?$CJ?$AA@
	push	0
	push	384					; 00000180H
	push	1001					; 000003e9H
	push	esi
	call	edi

; 113  : 			SendDlgItemMessage( hWnd, IDC_RESOLUTION, LB_ADDSTRING, 0, (LPARAM)(LPCSTR)"320 x 240" );

	push	OFFSET FLAT:??_C@_09FFLAMHDK@320?5x?5240?$AA@
	push	0
	push	384					; 00000180H
	push	1001					; 000003e9H
	push	esi
	call	edi

; 114  : 			SendDlgItemMessage( hWnd, IDC_RESOLUTION, LB_ADDSTRING, 0, (LPARAM)(LPCSTR)"400 x 300" );

	push	OFFSET FLAT:??_C@_09CGCPDLHM@400?5x?5300?$AA@
	push	0
	push	384					; 00000180H
	push	1001					; 000003e9H
	push	esi
	call	edi

; 115  : 			SendDlgItemMessage( hWnd, IDC_RESOLUTION, LB_ADDSTRING, 0, (LPARAM)(LPCSTR)"512 x 384" );

	push	OFFSET FLAT:??_C@_09PGMMNHMA@512?5x?5384?$AA@
	push	0
	push	384					; 00000180H
	push	1001					; 000003e9H
	push	esi
	call	edi

; 116  : 			SendDlgItemMessage( hWnd, IDC_RESOLUTION, LB_ADDSTRING, 0, (LPARAM)(LPCSTR)"640 x 480" );

	push	OFFSET FLAT:??_C@_09OMPCNDEM@640?5x?5480?$AA@
	push	0
	push	384					; 00000180H
	push	1001					; 000003e9H
	push	esi
	call	edi

; 117  : 			SendDlgItemMessage( hWnd, IDC_RESOLUTION, LB_ADDSTRING, 0, (LPARAM)(LPCSTR)"800 x 600" );

	push	OFFSET FLAT:??_C@_09LMNCLMA@800?5x?5600?$AA@
	push	0
	push	384					; 00000180H
	push	1001					; 000003e9H
	push	esi
	call	edi

; 118  : 			SendDlgItemMessage( hWnd, IDC_RESOLUTION, LB_ADDSTRING, 0, (LPARAM)(LPCSTR)"1024 x 768" );

	push	OFFSET FLAT:??_C@_0L@KHKHJBNB@1024?5x?5768?$AA@
	push	0
	push	384					; 00000180H
	push	1001					; 000003e9H
	push	esi
	call	edi

; 119  : 			SendDlgItemMessage( hWnd, IDC_RESOLUTION, LB_ADDSTRING, 0, (LPARAM)(LPCSTR)"1152 x 864" );

	push	OFFSET FLAT:??_C@_0L@BOLNMBPL@1152?5x?5864?$AA@
	push	0
	push	384					; 00000180H
	push	1001					; 000003e9H
	push	esi
	call	edi

; 120  : 			SendDlgItemMessage( hWnd, IDC_RESOLUTION, LB_ADDSTRING, 0, (LPARAM)(LPCSTR)"1280 x 720" );

	push	OFFSET FLAT:??_C@_0L@HNOGOHFM@1280?5x?5720?$AA@
	push	0
	push	384					; 00000180H
	push	1001					; 000003e9H
	push	esi
	call	edi

; 121  : 			SendDlgItemMessage( hWnd, IDC_RESOLUTION, LB_ADDSTRING, 0, (LPARAM)(LPCSTR)"1280 x 1024" );

	push	OFFSET FLAT:??_C@_0M@PPEHOBIK@1280?5x?51024?$AA@
	push	0
	push	384					; 00000180H
	push	1001					; 000003e9H
	push	esi
	call	edi

; 122  : 			SendDlgItemMessage( hWnd, IDC_RESOLUTION, LB_ADDSTRING, 0, (LPARAM)(LPCSTR)"1600 x 1200 *gah*" );

	push	OFFSET FLAT:??_C@_0BC@FEDLLBDO@1600?5x?51200?5?$CKgah?$CK?$AA@
	push	0
	push	384					; 00000180H
	push	1001					; 000003e9H
	push	esi
	call	edi

; 123  : 			SendDlgItemMessage( hWnd, IDC_RESOLUTION, LB_SETCURSEL, 5, 0 );

	push	0
	push	5
	push	390					; 00000186H
	push	1001					; 000003e9H
	push	esi
	call	edi

; 124  : #ifdef DEBUG
; 125  : 			CheckDlgButton( hWnd, IDC_FULLSCREEN, 0 );
; 126  : #else
; 127  : 			CheckDlgButton( hWnd, IDC_FULLSCREEN, 1 );

	mov	edi, DWORD PTR __imp__CheckDlgButton@12
	push	1
	push	1002					; 000003eaH
	push	esi
	call	edi

; 128  : #endif
; 129  : 			CheckDlgButton( hWnd, IDC_MUSIC, 1 );

	push	1
	push	1003					; 000003ebH
	push	esi
	call	edi
$L20559:
	pop	edi

; 148  : 					break;
; 149  : 
; 150  : 			};
; 151  : 			break;
; 152  : 		//case WM_
; 153  : 		default:
; 154  : 			//return DefDlgProc( hWnd, uMsg, wParam, lParam );
; 155  : 			break;
; 156  : 	};
; 157  : 
; 158  : 	return FALSE;

	xor	eax, eax
	pop	esi

; 159  : };

	ret	16					; 00000010H
?StartupDialog@@YGHPAUHWND__@@IIJ@Z ENDP		; StartupDialog
_TEXT	ENDS
PUBLIC	?upload_images@@YAXXZ				; upload_images
EXTRN	?glaUploadGif@@YAXHPAEJ@Z:NEAR			; glaUploadGif
EXTRN	_gif_flare:BYTE
EXTRN	_gif_psikorp2:BYTE
EXTRN	_gif_grid:BYTE
EXTRN	_gif_rost:BYTE
EXTRN	_gif_clouds:BYTE
EXTRN	_gif_psikorp3:BYTE
EXTRN	_gif_title:BYTE
EXTRN	_gif_twister2:BYTE
EXTRN	_gif_green:BYTE
EXTRN	_gif_silu:BYTE
EXTRN	_gif_names:BYTE
EXTRN	_gif_psikorp4:BYTE
; Function compile flags: /Ogty
;	COMDAT ?upload_images@@YAXXZ
_TEXT	SEGMENT
?upload_images@@YAXXZ PROC NEAR				; upload_images, COMDAT

; 165  : 	UPLOADMACRO( GIF_FLARE, gif_flare );

	push	1
	push	OFFSET FLAT:_gif_flare
	push	102					; 00000066H
	call	?glaUploadGif@@YAXHPAEJ@Z		; glaUploadGif

; 166  : 	UPLOADMACRO( GIF_PSIKORP2, gif_psikorp2 );

	push	1
	push	OFFSET FLAT:_gif_psikorp2
	push	103					; 00000067H
	call	?glaUploadGif@@YAXHPAEJ@Z		; glaUploadGif

; 167  : //	UPLOADMACRO( GIF_FLOWER, gif_flower );
; 168  : 	UPLOADMACRO( GIF_GRID, gif_grid );

	push	1
	push	OFFSET FLAT:_gif_grid
	push	105					; 00000069H
	call	?glaUploadGif@@YAXHPAEJ@Z		; glaUploadGif

; 169  : //	UPLOADMACRO( GIF_PSIBAND, gif_psiband );
; 170  : 	UPLOADMACRO( GIF_ROST, gif_rost );

	push	1
	push	OFFSET FLAT:_gif_rost
	push	109					; 0000006dH
	call	?glaUploadGif@@YAXHPAEJ@Z		; glaUploadGif

; 171  : //	UPLOADMACRO( GIF_LANDSCAPE, gif_landscape );
; 172  : 	UPLOADMACRO( GIF_CLOUDS, gif_clouds );

	push	1
	push	OFFSET FLAT:_gif_clouds
	push	111					; 0000006fH
	call	?glaUploadGif@@YAXHPAEJ@Z		; glaUploadGif

; 173  : 	UPLOADMACRO( GIF_PSIKORP3, gif_psikorp3 );

	push	1
	push	OFFSET FLAT:_gif_psikorp3
	push	112					; 00000070H
	call	?glaUploadGif@@YAXHPAEJ@Z		; glaUploadGif
	add	esp, 72					; 00000048H

; 174  : 	UPLOADMACRO( GIF_TITLE, gif_title );

	push	1
	push	OFFSET FLAT:_gif_title
	push	113					; 00000071H
	call	?glaUploadGif@@YAXHPAEJ@Z		; glaUploadGif

; 175  : //	UPLOADMACRO( GIF_FULL, gif_full );
; 176  : //	UPLOADMACRO( GIF_TWISTER, gif_twister );
; 177  : 	UPLOADMACRO( GIF_TWISTER2, gif_twister2 );

	push	1
	push	OFFSET FLAT:_gif_twister2
	push	117					; 00000075H
	call	?glaUploadGif@@YAXHPAEJ@Z		; glaUploadGif

; 178  : //	UPLOADMACRO( GIF_SYMBOLER, gif_symboler );
; 179  : //	UPLOADMACRO( GIF_FACES, gif_faces );
; 180  : //	UPLOADMACRO( GIF_KROM, gif_krom );
; 181  : 	UPLOADMACRO( GIF_PSIKORP4, gif_psikorp4 );

	push	1
	push	OFFSET FLAT:_gif_psikorp4
	push	123					; 0000007bH
	call	?glaUploadGif@@YAXHPAEJ@Z		; glaUploadGif

; 182  : 	UPLOADMACRO( GIF_GREEN, gif_green );

	push	1
	push	OFFSET FLAT:_gif_green
	push	120					; 00000078H
	call	?glaUploadGif@@YAXHPAEJ@Z		; glaUploadGif

; 183  : 	UPLOADMACRO( GIF_SILU, gif_silu );

	push	1
	push	OFFSET FLAT:_gif_silu
	push	121					; 00000079H
	call	?glaUploadGif@@YAXHPAEJ@Z		; glaUploadGif

; 184  : 	UPLOADMACRO( GIF_NAMES, gif_names );

	push	1
	push	OFFSET FLAT:_gif_names
	push	122					; 0000007aH
	call	?glaUploadGif@@YAXHPAEJ@Z		; glaUploadGif
	add	esp, 72					; 00000048H

; 185  : };

	ret	0
?upload_images@@YAXXZ ENDP				; upload_images
_TEXT	ENDS
PUBLIC	??_C@_0BJ@DIFCELEH@error?5?$CFd?5?$CIlasterror?$CJ?6?$CFs?6?$AA@ ; `string'
PUBLIC	??_C@_05MBDEGLCK@ERROR?$AA@			; `string'
PUBLIC	?Error@@YAXPAD@Z				; Error
EXTRN	__imp__wsprintfA:NEAR
EXTRN	__imp__MessageBoxA@16:NEAR
EXTRN	__imp__ExitProcess@4:NEAR
EXTRN	__imp__GetLastError@0:NEAR
;	COMDAT ??_C@_0BJ@DIFCELEH@error?5?$CFd?5?$CIlasterror?$CJ?6?$CFs?6?$AA@
CONST	SEGMENT
??_C@_0BJ@DIFCELEH@error?5?$CFd?5?$CIlasterror?$CJ?6?$CFs?6?$AA@ DB 'erro'
	DB	'r %d (lasterror)', 0aH, '%s', 0aH, 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_05MBDEGLCK@ERROR?$AA@
CONST	SEGMENT
??_C@_05MBDEGLCK@ERROR?$AA@ DB 'ERROR', 00H		; `string'
; Function compile flags: /Ogty
CONST	ENDS
;	COMDAT ?Error@@YAXPAD@Z
_TEXT	SEGMENT
_dum$ = -1024
_string$ = 8
?Error@@YAXPAD@Z PROC NEAR				; Error, COMDAT

; 188  : 	//exit(0);
; 189  : //#ifdef _DEBUG
; 190  : 	char dum[1024];
; 191  : 	wsprintf( dum, "error %d (lasterror)\n%s\n", GetLastError(), string );

	mov	eax, DWORD PTR _string$[esp-4]
	sub	esp, 1024				; 00000400H
	push	eax
	call	DWORD PTR __imp__GetLastError@0
	push	eax
	lea	ecx, DWORD PTR _dum$[esp+1032]
	push	OFFSET FLAT:??_C@_0BJ@DIFCELEH@error?5?$CFd?5?$CIlasterror?$CJ?6?$CFs?6?$AA@
	push	ecx
	call	DWORD PTR __imp__wsprintfA
	add	esp, 16					; 00000010H

; 192  : 	MessageBox( 0, dum, "ERROR", MB_OK );

	push	0
	push	OFFSET FLAT:??_C@_05MBDEGLCK@ERROR?$AA@
	lea	edx, DWORD PTR _dum$[esp+1032]
	push	edx
	push	0
	call	DWORD PTR __imp__MessageBoxA@16

; 193  : //#endif
; 194  : 	ExitProcess(0);

	push	0
	call	DWORD PTR __imp__ExitProcess@4
$L20564:
	int	3
?Error@@YAXPAD@Z ENDP					; Error
_TEXT	ENDS
PUBLIC	??_C@_0BP@NAMCMGKC@Couldn?8t?5initialize?5soundcard?4?$AA@ ; `string'
PUBLIC	??_C@_0BG@DEHFMOHG@Couldn?8t?5load?5module?4?$AA@ ; `string'
PUBLIC	__real@430e0000
PUBLIC	_WinMain@16
EXTRN	__fltused:NEAR
EXTRN	_FSOUND_File_SetCallbacks:NEAR
EXTRN	_FSOUND_Init:NEAR
EXTRN	_FSOUND_Close:NEAR
EXTRN	_FMUSIC_LoadSong:NEAR
EXTRN	_FMUSIC_FreeSong:NEAR
EXTRN	_FMUSIC_PlaySong:NEAR
EXTRN	__imp__DialogBoxParamA@20:NEAR
EXTRN	?glaBlit@@YAXXZ:NEAR				; glaBlit
EXTRN	?glaCls@@YAXM@Z:NEAR				; glaCls
EXTRN	?glaStartup@@YAXHIII@Z:NEAR			; glaStartup
EXTRN	?glaShutdown@@YAXXZ:NEAR			; glaShutdown
EXTRN	?glaDefaultProjection@@YAXXZ:NEAR		; glaDefaultProjection
EXTRN	?glaExit@@YAHXZ:NEAR				; glaExit
EXTRN	?glaReset@@YAXXZ:NEAR				; glaReset
EXTRN	?glaTime@@YAMXZ:NEAR				; glaTime
EXTRN	?_pd@@3PAMA:DWORD				; _pd
EXTRN	?_pu@@3PAMA:DWORD				; _pu
EXTRN	?_pv@@3PAMA:DWORD				; _pv
EXTRN	?_pu2@@3PAMA:DWORD				; _pu2
EXTRN	?_pv2@@3PAMA:DWORD				; _pv2
EXTRN	?event_run@@YAXMM@Z:NEAR			; event_run
EXTRN	?event_register@@YAXMMP6AXPAUEVENT@@@ZJ@Z:NEAR	; event_register
EXTRN	?event_init@@YAXXZ:NEAR				; event_init
EXTRN	?event_free@@YAXXZ:NEAR				; event_free
EXTRN	?p_cubes_init@@YAXXZ:NEAR			; p_cubes_init
EXTRN	?p_cubes_run@@YAXPAUEVENT@@@Z:NEAR		; p_cubes_run
EXTRN	?p_greetings_init@@YAXXZ:NEAR			; p_greetings_init
EXTRN	?p_greetings_run@@YAXPAUEVENT@@@Z:NEAR		; p_greetings_run
EXTRN	?p_psyk_run@@YAXPAUEVENT@@@Z:NEAR		; p_psyk_run
EXTRN	?p_twister_run@@YAXPAUEVENT@@@Z:NEAR		; p_twister_run
EXTRN	?p_klask_init@@YAXXZ:NEAR			; p_klask_init
EXTRN	?p_klask_run@@YAXPAUEVENT@@@Z:NEAR		; p_klask_run
EXTRN	?p_wirelandscape_run@@YAXPAUEVENT@@@Z:NEAR	; p_wirelandscape_run
EXTRN	?p_aftershit_run@@YAXPAUEVENT@@@Z:NEAR		; p_aftershit_run
EXTRN	?p_twist3d_run@@YAXPAUEVENT@@@Z:NEAR		; p_twist3d_run
EXTRN	?p_sphere_run@@YAXPAUEVENT@@@Z:NEAR		; p_sphere_run
EXTRN	?p_name_run@@YAXPAUEVENT@@@Z:NEAR		; p_name_run
EXTRN	?p_title_run@@YAXPAUEVENT@@@Z:NEAR		; p_title_run
EXTRN	?p_whiteflash_run@@YAXPAUEVENT@@@Z:NEAR		; p_whiteflash_run
EXTRN	?p_static_run@@YAXPAUEVENT@@@Z:NEAR		; p_static_run
EXTRN	?p_tunnel_run@@YAXPAUEVENT@@@Z:NEAR		; p_tunnel_run
EXTRN	?p_fulintro_run@@YAXPAUEVENT@@@Z:NEAR		; p_fulintro_run
EXTRN	?p_hanzon_run@@YAXPAUEVENT@@@Z:NEAR		; p_hanzon_run
EXTRN	?p_fadeblack_run@@YAXPAUEVENT@@@Z:NEAR		; p_fadeblack_run
EXTRN	?p_loading_draw@@YAXHH@Z:NEAR			; p_loading_draw
EXTRN	_gif_font:BYTE
EXTRN	__imp__Sleep@4:NEAR
;	COMDAT ??_C@_0BP@NAMCMGKC@Couldn?8t?5initialize?5soundcard?4?$AA@
CONST	SEGMENT
??_C@_0BP@NAMCMGKC@Couldn?8t?5initialize?5soundcard?4?$AA@ DB 'Couldn''t '
	DB	'initialize soundcard.', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0BG@DEHFMOHG@Couldn?8t?5load?5module?4?$AA@
CONST	SEGMENT
??_C@_0BG@DEHFMOHG@Couldn?8t?5load?5module?4?$AA@ DB 'Couldn''t load modu'
	DB	'le.', 00H					; `string'
CONST	ENDS
;	COMDAT __real@430e0000
CONST	SEGMENT
__real@430e0000 DD 0430e0000r			; 142
; Function compile flags: /Ogty
CONST	ENDS
;	COMDAT _WinMain@16
_TEXT	SEGMENT
_t$20489 = 8
_mod$ = 8
_hInstance$ = 8
_hPrevInstance$ = 12
_lpCmdLine$ = 16
_nShowCmd$ = 20
_WinMain@16 PROC NEAR					; COMDAT

; 198  : 
; 199  : 	FMUSIC_MODULE *mod;
; 200  : 
; 201  : 	StartupFlags = 0;//STARTUP_MUSIC;
; 202  : 
; 203  : 	DialogBox( hInstance, MAKEINTRESOURCE(IDD_DIALOG1), 0, (DLGPROC)StartupDialog );

	mov	eax, DWORD PTR _hInstance$[esp-4]
	push	0
	push	OFFSET FLAT:?StartupDialog@@YGHPAUHWND__@@IIJ@Z ; StartupDialog
	push	0
	push	101					; 00000065H
	push	eax
	mov	DWORD PTR ?StartupFlags@@3JA, 0		; StartupFlags
	call	DWORD PTR __imp__DialogBoxParamA@20

; 204  : 
; 205  : 	if( StartupFlags ) {

	mov	eax, DWORD PTR ?StartupFlags@@3JA	; StartupFlags
	test	eax, eax
	je	$L20571

; 206  : 
; 207  : 		//glaStartup( StartupFlags, 640, 480, 32 );
; 208  : 
; 209  : 		unsigned int w, h;
; 210  : 		w = 640; 
; 211  : 		h = 480;
; 212  : 		if( StartupFlags & STARTUP_160X120 ) { w = 160; h = 120; };

	test	al, 1
	mov	ecx, 640				; 00000280H
	mov	edx, 480				; 000001e0H
	je	SHORT $L20462
	mov	ecx, 160				; 000000a0H
	mov	edx, 120				; 00000078H
$L20462:

; 213  : 		if( StartupFlags & STARTUP_320X240 ) { w = 320; h = 240; };

	test	al, 2
	je	SHORT $L20463
	mov	ecx, 320				; 00000140H
	mov	edx, 240				; 000000f0H
$L20463:

; 214  : 		if( StartupFlags & STARTUP_400X300 ) { w = 400; h = 300; };

	test	al, 4
	je	SHORT $L20464
	mov	ecx, 400				; 00000190H
	mov	edx, 300				; 0000012cH
$L20464:

; 215  : 		if( StartupFlags & STARTUP_512X384 ) { w = 512; h = 384; };

	test	al, 8
	je	SHORT $L20465
	mov	ecx, 512				; 00000200H
	mov	edx, 384				; 00000180H
$L20465:

; 216  : 		if( StartupFlags & STARTUP_800X600 ) { w = 800; h = 600; };

	test	al, 32					; 00000020H
	je	SHORT $L20466
	mov	ecx, 800				; 00000320H
	mov	edx, 600				; 00000258H
$L20466:

; 217  : 		if( StartupFlags & STARTUP_1024X768 ) { w = 1024; h = 768; };

	test	al, 64					; 00000040H
	je	SHORT $L20467
	mov	ecx, 1024				; 00000400H
	mov	edx, 768				; 00000300H
$L20467:

; 218  : 		if( StartupFlags & STARTUP_1152X864 ) { w = 1152; h = 864; };

	test	al, al
	jns	SHORT $L20468
	mov	ecx, 1152				; 00000480H
	mov	edx, 864				; 00000360H
$L20468:

; 219  : 		if( StartupFlags & STARTUP_1280X720 ) { w = 1280; h = 720; };

	test	ah, 1
	je	SHORT $L20469
	mov	ecx, 1280				; 00000500H
	mov	edx, 720				; 000002d0H
$L20469:

; 220  : 		if( StartupFlags & STARTUP_1280X1024 ) { w = 1280; h = 1024; };

	test	ah, 2
	je	SHORT $L20470
	mov	ecx, 1280				; 00000500H
	mov	edx, 1024				; 00000400H
$L20470:

; 221  : 		if( StartupFlags & STARTUP_1600X1200 ) { w = 1600; h = 1200; };

	test	ah, 4
	je	SHORT $L20471
	mov	ecx, 1600				; 00000640H
	mov	edx, 1200				; 000004b0H
$L20471:
	push	esi
	push	edi

; 222  : 
; 223  : 		glaStartup( !(StartupFlags & STARTUP_WINDOWED), w, h, 32 );

	push	32					; 00000020H
	shr	eax, 13					; 0000000dH
	push	edx
	not	eax
	push	ecx
	and	eax, 1
	push	eax
	call	?glaStartup@@YAXHIII@Z			; glaStartup

; 224  : 
; 225  : 		//if( StartupFlags & STARTUP_MUSIC ) mmp_init();
; 226  : 
; 227  : 	/*	glaCls();
; 228  : 		// rita en 'hold on...' text... (ev texturemappad...)
; 229  : 		glaBlit();*/
; 230  : 
; 231  : 	//	glaUploadGif( GLA_FONTS, (unsigned char *)&gif_font, 0x00112233 );
; 232  : 
; 233  : 		_pd = (float *)GlobalAlloc( MEM_COMMIT, 150*40*sizeof(float) );

	mov	esi, DWORD PTR __imp__GlobalAlloc@8
	add	esp, 16					; 00000010H
	push	24000					; 00005dc0H
	push	4096					; 00001000H
	call	esi

; 234  : 		_pu = (float *)GlobalAlloc( MEM_COMMIT, 150*40*sizeof(float) );

	push	24000					; 00005dc0H
	push	4096					; 00001000H
	mov	DWORD PTR ?_pd@@3PAMA, eax		; _pd
	call	esi

; 235  : 		_pv = (float *)GlobalAlloc( MEM_COMMIT, 150*40*sizeof(float) );

	push	24000					; 00005dc0H
	push	4096					; 00001000H
	mov	DWORD PTR ?_pu@@3PAMA, eax		; _pu
	call	esi

; 236  : 		_pu2 = (float *)GlobalAlloc( MEM_COMMIT, 150*40*sizeof(float) );

	push	24000					; 00005dc0H
	push	4096					; 00001000H
	mov	DWORD PTR ?_pv@@3PAMA, eax		; _pv
	call	esi

; 237  : 		_pv2 = (float *)GlobalAlloc( MEM_COMMIT, 150*40*sizeof(float) );

	push	24000					; 00005dc0H
	push	4096					; 00001000H
	mov	DWORD PTR ?_pu2@@3PAMA, eax		; _pu2
	call	esi

; 238  : 
; 239  : 			// undantag...
; 240  : 		UPLOADMACRO( GIF_FONT, gif_font );

	push	1
	push	OFFSET FLAT:_gif_font
	push	106					; 0000006aH
	mov	DWORD PTR ?_pv2@@3PAMA, eax		; _pv2
	call	?glaUploadGif@@YAXHPAEJ@Z		; glaUploadGif

; 241  : 
; 242  : 		p_loading_draw( 0, 16 );

	push	16					; 00000010H
	push	0
	call	?p_loading_draw@@YAXHH@Z		; p_loading_draw

; 243  : 
; 244  : //		Sleep(5000);
; 245  : 
; 246  : #ifndef NOMUSIC
; 247  : //		if( StartupFlags & STARTUP_MUSIC ) mmp_loadmodule(	(unsigned char *)&intromusic );
; 248  : #endif
; 249  : 
; 250  : 		event_init();

	call	?event_init@@YAXXZ			; event_init

; 251  : 
; 252  : #ifndef NOPARTS
; 253  : 		p_loading_draw( 1, 16 );	

	push	16					; 00000010H
	push	1
	call	?p_loading_draw@@YAXHH@Z		; p_loading_draw

; 254  : 		upload_images();

	call	?upload_images@@YAXXZ			; upload_images

; 255  : 
; 256  : 		p_loading_draw( 5, 16 );	

	push	16					; 00000010H
	push	5
	call	?p_loading_draw@@YAXHH@Z		; p_loading_draw

; 257  : 		p_cubes_init();

	call	?p_cubes_init@@YAXXZ			; p_cubes_init

; 258  : 
; 259  : 		p_loading_draw( 9, 16 );	

	push	16					; 00000010H
	push	9
	call	?p_loading_draw@@YAXHH@Z		; p_loading_draw

; 260  : 		p_greetings_init();

	call	?p_greetings_init@@YAXXZ		; p_greetings_init

; 261  : 
; 262  : 		p_loading_draw( 12, 16 );	

	push	16					; 00000010H
	push	12					; 0000000cH
	call	?p_loading_draw@@YAXHH@Z		; p_loading_draw

; 263  : 		p_klask_init();

	call	?p_klask_init@@YAXXZ			; p_klask_init

; 264  : 
; 265  : 		p_loading_draw( 15, 16 );

	push	16					; 00000010H
	push	15					; 0000000fH
	call	?p_loading_draw@@YAXHH@Z		; p_loading_draw

; 266  : #endif
; 267  : 
; 268  : 		// initeringen kalas, glad påsk...
; 269  : 
; 270  : #ifndef NOMUSIC
; 271  : 		if( StartupFlags & STARTUP_MUSIC ) {

	mov	eax, DWORD PTR ?StartupFlags@@3JA	; StartupFlags
	mov	esi, 32768				; 00008000H
	add	esp, 60					; 0000003cH
	test	eax, esi
	je	SHORT $L20572

; 272  : 			//mmp_start(); else mmp_startnosound();
; 273  : #ifdef DEBUG
; 274  : 			FSOUND_File_SetCallbacks(fileopen, fileclose, fileread, fileseek, filetell);
; 275  : #else
; 276  : 			FSOUND_File_SetCallbacks(memopen, memclose, memread, memseek, memtell);

	push	OFFSET FLAT:?memtell@@YAHI@Z		; memtell
	push	OFFSET FLAT:?memseek@@YAXIHC@Z		; memseek
	push	OFFSET FLAT:?memread@@YAHPAXHI@Z	; memread
	push	OFFSET FLAT:?memclose@@YAXI@Z		; memclose
	push	OFFSET FLAT:?memopen@@YAIPAD@Z		; memopen
	call	_FSOUND_File_SetCallbacks

; 277  : #endif
; 278  : 
; 279  : 			if (!FSOUND_Init(44100, 0)) Error( "Couldn't initialize soundcard." );

	push	0
	push	44100					; 0000ac44H
	call	_FSOUND_Init
	add	esp, 28					; 0000001cH
	test	al, al
	jne	SHORT $L20484
	push	OFFSET FLAT:??_C@_0BP@NAMCMGKC@Couldn?8t?5initialize?5soundcard?4?$AA@
	call	?Error@@YAXPAD@Z			; Error
	add	esp, 4
$L20484:

; 280  : 
; 281  : #ifdef DEBUG
; 282  : 			mod = FMUSIC_LoadSong("modul.xm", NULL);// sampleloadcallback);
; 283  : #else
; 284  : 			mod = FMUSIC_LoadSong(NULL, NULL);// sampleloadcallback);

	push	0
	push	0
	call	_FMUSIC_LoadSong
	mov	edi, eax
	add	esp, 8

; 285  : #endif
; 286  : 			if (!mod) Error( "Couldn't load module." );

	test	edi, edi
	jne	SHORT $L20486
	push	OFFSET FLAT:??_C@_0BG@DEHFMOHG@Couldn?8t?5load?5module?4?$AA@
	call	?Error@@YAXPAD@Z			; Error
	add	esp, 4
	jmp	SHORT $L20486
$L20572:
	mov	edi, DWORD PTR _mod$[esp+4]
$L20486:

; 287  : 		};
; 288  : #endif
; 289  : 
; 290  : #ifndef NOPARTS
; 291  : 		Sleep( 100 );

	push	100					; 00000064H
	call	DWORD PTR __imp__Sleep@4

; 292  : 		glaCls(0.33f);

	push	1051260355				; 3ea8f5c3H
	call	?glaCls@@YAXM@Z				; glaCls

; 293  : 
; 294  : 		// FÖRSTA TEXTEN I INTROT	
; 295  : 		event_register(		5,		5.2f,	p_tunnel_run,			1		);

	push	1
	push	OFFSET FLAT:?p_tunnel_run@@YAXPAUEVENT@@@Z ; p_tunnel_run
	push	1084647014				; 40a66666H
	push	1084227584				; 40a00000H
	call	?event_register@@YAXMMP6AXPAUEVENT@@@ZJ@Z ; event_register

; 296  : 		event_register(		5.1f,	5.3f,	p_wirelandscape_run,	0		);

	push	0
	push	OFFSET FLAT:?p_wirelandscape_run@@YAXPAUEVENT@@@Z ; p_wirelandscape_run
	push	1084856730				; 40a9999aH
	push	1084437299				; 40a33333H
	call	?event_register@@YAXMMP6AXPAUEVENT@@@ZJ@Z ; event_register

; 297  : 		event_register(		5.2f,	5.4f,	p_sphere_run,			0		);

	push	0
	push	OFFSET FLAT:?p_sphere_run@@YAXPAUEVENT@@@Z ; p_sphere_run
	push	1085066445				; 40accccdH
	push	1084647014				; 40a66666H
	call	?event_register@@YAXMMP6AXPAUEVENT@@@ZJ@Z ; event_register

; 298  : 		event_register(		2,		5.5f,	p_fulintro_run,			0		);

	push	0
	push	OFFSET FLAT:?p_fulintro_run@@YAXPAUEVENT@@@Z ; p_fulintro_run
	push	1085276160				; 40b00000H
	push	1073741824				; 40000000H
	call	?event_register@@YAXMMP6AXPAUEVENT@@@ZJ@Z ; event_register
	add	esp, 68					; 00000044H

; 299  : 
; 300  : 		// ANDRA TEXTEN I INTROT
; 301  : 		event_register(		9,		9.2f,	p_cubes_run,			0		);

	push	0
	push	OFFSET FLAT:?p_cubes_run@@YAXPAUEVENT@@@Z ; p_cubes_run
	push	1091777331				; 41133333H
	push	1091567616				; 41100000H
	call	?event_register@@YAXMMP6AXPAUEVENT@@@ZJ@Z ; event_register

; 302  : 		event_register(		9.1f,	9.3f,	p_psyk_run,				0		);

	push	0
	push	OFFSET FLAT:?p_psyk_run@@YAXPAUEVENT@@@Z ; p_psyk_run
	push	1091882189				; 4114cccdH
	push	1091672474				; 4111999aH
	call	?event_register@@YAXMMP6AXPAUEVENT@@@ZJ@Z ; event_register

; 303  : 		event_register(		9.2f,	9.4f,	p_twist3d_run,			0		);

	push	0
	push	OFFSET FLAT:?p_twist3d_run@@YAXPAUEVENT@@@Z ; p_twist3d_run
	push	1091987046				; 41166666H
	push	1091777331				; 41133333H
	call	?event_register@@YAXMMP6AXPAUEVENT@@@ZJ@Z ; event_register

; 304  : 		event_register(		6,		9.5f,	p_fulintro_run,			1		);

	push	1
	push	OFFSET FLAT:?p_fulintro_run@@YAXPAUEVENT@@@Z ; p_fulintro_run
	push	1092091904				; 41180000H
	push	1086324736				; 40c00000H
	call	?event_register@@YAXMMP6AXPAUEVENT@@@ZJ@Z ; event_register
	add	esp, 64					; 00000040H

; 305  : 
; 306  : 		// TREDJE TEXTEN I INTROT
; 307  : 		event_register(		13,		13.2f,	p_twist3d_run,			0		);

	push	0
	push	OFFSET FLAT:?p_twist3d_run@@YAXPAUEVENT@@@Z ; p_twist3d_run
	push	1095971635				; 41533333H
	push	1095761920				; 41500000H
	call	?event_register@@YAXMMP6AXPAUEVENT@@@ZJ@Z ; event_register

; 308  : 		event_register(		13.1f,	13.3f,	p_psyk_run,				0		);

	push	0
	push	OFFSET FLAT:?p_psyk_run@@YAXPAUEVENT@@@Z ; p_psyk_run
	push	1096076493				; 4154cccdH
	push	1095866778				; 4151999aH
	call	?event_register@@YAXMMP6AXPAUEVENT@@@ZJ@Z ; event_register

; 309  : 		event_register(		13.2f,	13.4f,	p_tunnel_run,			1		);

	push	1
	push	OFFSET FLAT:?p_tunnel_run@@YAXPAUEVENT@@@Z ; p_tunnel_run
	push	1096181350				; 41566666H
	push	1095971635				; 41533333H
	call	?event_register@@YAXMMP6AXPAUEVENT@@@ZJ@Z ; event_register

; 310  : 		event_register(		10,		13.5f,	p_fulintro_run,			2		);

	push	2
	push	OFFSET FLAT:?p_fulintro_run@@YAXPAUEVENT@@@Z ; p_fulintro_run
	push	1096286208				; 41580000H
	push	1092616192				; 41200000H
	call	?event_register@@YAXMMP6AXPAUEVENT@@@ZJ@Z ; event_register
	add	esp, 64					; 00000040H

; 311  : 
; 312  : 		// FLIMMER I INTROT
; 313  : 		event_register(		1,		13.7f,	p_static_run,			256		);

	push	256					; 00000100H
	push	OFFSET FLAT:?p_static_run@@YAXPAUEVENT@@@Z ; p_static_run
	push	1096495923				; 415b3333H
	push	1065353216				; 3f800000H
	call	?event_register@@YAXMMP6AXPAUEVENT@@@ZJ@Z ; event_register

; 314  : 
; 315  : 		// FLASH Å SEN 64 SNURRA
; 316  : 		event_register(		14,		15,		p_whiteflash_run,		0		);

	push	0
	push	OFFSET FLAT:?p_whiteflash_run@@YAXPAUEVENT@@@Z ; p_whiteflash_run
	push	1097859072				; 41700000H
	push	1096810496				; 41600000H
	call	?event_register@@YAXMMP6AXPAUEVENT@@@ZJ@Z ; event_register

; 317  : 		event_register(		14,		29,		p_wirelandscape_run,	0		);

	push	0
	push	OFFSET FLAT:?p_wirelandscape_run@@YAXPAUEVENT@@@Z ; p_wirelandscape_run
	push	1105723392				; 41e80000H
	push	1096810496				; 41600000H
	call	?event_register@@YAXMMP6AXPAUEVENT@@@ZJ@Z ; event_register

; 318  : 
; 319  : 		// FLASH Å HANZON+PSYKSNURR (MUSIKEN KOMMER IGÅNG)
; 320  : 		event_register(		29,		30,		p_whiteflash_run,		0		);

	push	0
	push	OFFSET FLAT:?p_whiteflash_run@@YAXPAUEVENT@@@Z ; p_whiteflash_run
	push	1106247680				; 41f00000H
	push	1105723392				; 41e80000H
	call	?event_register@@YAXMMP6AXPAUEVENT@@@ZJ@Z ; event_register
	add	esp, 64					; 00000040H

; 321  : 		event_register(		29,		42,		p_psyk_run,				0		);

	push	0
	push	OFFSET FLAT:?p_psyk_run@@YAXPAUEVENT@@@Z ; p_psyk_run
	push	1109917696				; 42280000H
	push	1105723392				; 41e80000H
	call	?event_register@@YAXMMP6AXPAUEVENT@@@ZJ@Z ; event_register

; 322  : 		event_register(		41,		58,		p_title_run,			3		);

	push	3
	push	OFFSET FLAT:?p_title_run@@YAXPAUEVENT@@@Z ; p_title_run
	push	1114112000				; 42680000H
	push	1109655552				; 42240000H
	call	?event_register@@YAXMMP6AXPAUEVENT@@@ZJ@Z ; event_register

; 323  : 		event_register(		29,		34,		p_hanzon_run,			0		);

	push	0
	push	OFFSET FLAT:?p_hanzon_run@@YAXPAUEVENT@@@Z ; p_hanzon_run
	push	1107820544				; 42080000H
	push	1105723392				; 41e80000H
	call	?event_register@@YAXMMP6AXPAUEVENT@@@ZJ@Z ; event_register

; 324  : 
; 325  : 		// VÅRA NAMN
; 326  : 		event_register(		32,		35,		p_name_run,				0		);

	push	0
	push	OFFSET FLAT:?p_name_run@@YAXPAUEVENT@@@Z ; p_name_run
	push	1108082688				; 420c0000H
	push	1107296256				; 42000000H
	call	?event_register@@YAXMMP6AXPAUEVENT@@@ZJ@Z ; event_register
	add	esp, 64					; 00000040H

; 327  : 		event_register(		36,		39,		p_name_run,				1		);

	push	1
	push	OFFSET FLAT:?p_name_run@@YAXPAUEVENT@@@Z ; p_name_run
	push	1109131264				; 421c0000H
	push	1108344832				; 42100000H
	call	?event_register@@YAXMMP6AXPAUEVENT@@@ZJ@Z ; event_register

; 328  : 
; 329  : 		// TWISTERN SNURRAR IN... BÅDA TVÅ (2D OCH 3D)
; 330  : 		event_register(		42,		58,		p_twist3d_run,			0		);

	push	0
	push	OFFSET FLAT:?p_twist3d_run@@YAXPAUEVENT@@@Z ; p_twist3d_run
	push	1114112000				; 42680000H
	push	1109917696				; 42280000H
	call	?event_register@@YAXMMP6AXPAUEVENT@@@ZJ@Z ; event_register

; 331  : 		event_register(		42,		43,		p_whiteflash_run,		0		);

	push	0
	push	OFFSET FLAT:?p_whiteflash_run@@YAXPAUEVENT@@@Z ; p_whiteflash_run
	push	1110179840				; 422c0000H
	push	1109917696				; 42280000H
	call	?event_register@@YAXMMP6AXPAUEVENT@@@ZJ@Z ; event_register

; 332  : 		event_register(		39,		52,		p_twister_run,			0		);

	push	0
	push	OFFSET FLAT:?p_twister_run@@YAXPAUEVENT@@@Z ; p_twister_run
	push	1112539136				; 42500000H
	push	1109131264				; 421c0000H
	call	?event_register@@YAXMMP6AXPAUEVENT@@@ZJ@Z ; event_register
	add	esp, 64					; 00000040H

; 333  : 
; 334  : 		// KUBERNA (MUSIKEN LUGNAR NER SIG)
; 335  : 		event_register(		58,		79,		p_cubes_run,			0		);

	push	0
	push	OFFSET FLAT:?p_cubes_run@@YAXPAUEVENT@@@Z ; p_cubes_run
	push	1117650944				; 429e0000H
	push	1114112000				; 42680000H
	call	?event_register@@YAXMMP6AXPAUEVENT@@@ZJ@Z ; event_register

; 336  : 		event_register(		58,		59,		p_whiteflash_run,		0		);

	push	0
	push	OFFSET FLAT:?p_whiteflash_run@@YAXPAUEVENT@@@Z ; p_whiteflash_run
	push	1114374144				; 426c0000H
	push	1114112000				; 42680000H
	call	?event_register@@YAXMMP6AXPAUEVENT@@@ZJ@Z ; event_register

; 337  : 
; 338  : 		// TUNNELN EFTERÅT, MED BLOBSPHERE
; 339  : 		event_register(		79,		80,		p_whiteflash_run,		0		);

	push	0
	push	OFFSET FLAT:?p_whiteflash_run@@YAXPAUEVENT@@@Z ; p_whiteflash_run
	push	1117782016				; 42a00000H
	push	1117650944				; 429e0000H
	call	?event_register@@YAXMMP6AXPAUEVENT@@@ZJ@Z ; event_register

; 340  : 		event_register(		79,		85,		p_tunnel_run,			512		);

	push	512					; 00000200H
	push	OFFSET FLAT:?p_tunnel_run@@YAXPAUEVENT@@@Z ; p_tunnel_run
	push	1118437376				; 42aa0000H
	push	1117650944				; 429e0000H
	call	?event_register@@YAXMMP6AXPAUEVENT@@@ZJ@Z ; event_register
	add	esp, 64					; 00000040H

; 341  : 		event_register(		79,		85,		p_sphere_run,			0		);

	push	0
	push	OFFSET FLAT:?p_sphere_run@@YAXPAUEVENT@@@Z ; p_sphere_run
	push	1118437376				; 42aa0000H
	push	1117650944				; 429e0000H
	call	?event_register@@YAXMMP6AXPAUEVENT@@@ZJ@Z ; event_register

; 342  : 
; 343  : 		// FSOL PSYK
; 344  : 		event_register(		85,		141,	p_klask_run,			264		);

	push	264					; 00000108H
	push	OFFSET FLAT:?p_klask_run@@YAXPAUEVENT@@@Z ; p_klask_run
	push	1124925440				; 430d0000H
	push	1118437376				; 42aa0000H
	call	?event_register@@YAXMMP6AXPAUEVENT@@@ZJ@Z ; event_register

; 345  : 
; 346  : 		// ÖVERGÅR I GREETS, SOM ÖVERGÅR I TUNNEL
; 347  : 		event_register(		85,		128,	p_greetings_run,		0		);

	push	0
	push	OFFSET FLAT:?p_greetings_run@@YAXPAUEVENT@@@Z ; p_greetings_run
	push	1124073472				; 43000000H
	push	1118437376				; 42aa0000H
	call	?event_register@@YAXMMP6AXPAUEVENT@@@ZJ@Z ; event_register

; 348  : 		event_register(		85,		86,		p_whiteflash_run,		0		);

	push	0
	push	OFFSET FLAT:?p_whiteflash_run@@YAXPAUEVENT@@@Z ; p_whiteflash_run
	push	1118568448				; 42ac0000H
	push	1118437376				; 42aa0000H
	call	?event_register@@YAXMMP6AXPAUEVENT@@@ZJ@Z ; event_register
	add	esp, 64					; 00000040H

; 349  : 		event_register(		100,	141,	p_tunnel_run,			512		);

	push	512					; 00000200H
	push	OFFSET FLAT:?p_tunnel_run@@YAXPAUEVENT@@@Z ; p_tunnel_run
	push	1124925440				; 430d0000H
	push	1120403456				; 42c80000H
	call	?event_register@@YAXMMP6AXPAUEVENT@@@ZJ@Z ; event_register

; 350  : 
; 351  : 		// TUNNELN ÖVERGÅR I '64' PLUS MASSOR AV EFFEKTER, COLOR DODGE'AT
; 352  : 		event_register(		114,	124.0f,	p_wirelandscape_run,	0		);

	push	0
	push	OFFSET FLAT:?p_wirelandscape_run@@YAXPAUEVENT@@@Z ; p_wirelandscape_run
	push	1123549184				; 42f80000H
	push	1122238464				; 42e40000H
	call	?event_register@@YAXMMP6AXPAUEVENT@@@ZJ@Z ; event_register

; 353  : 		event_register(		114,	124.0f,	p_psyk_run,				2		);

	push	2
	push	OFFSET FLAT:?p_psyk_run@@YAXPAUEVENT@@@Z ; p_psyk_run
	push	1123549184				; 42f80000H
	push	1122238464				; 42e40000H
	call	?event_register@@YAXMMP6AXPAUEVENT@@@ZJ@Z ; event_register

; 354  : 		event_register(		114,	115,	p_whiteflash_run,		0		);

	push	0
	push	OFFSET FLAT:?p_whiteflash_run@@YAXPAUEVENT@@@Z ; p_whiteflash_run
	push	1122369536				; 42e60000H
	push	1122238464				; 42e40000H
	call	?event_register@@YAXMMP6AXPAUEVENT@@@ZJ@Z ; event_register
	add	esp, 64					; 00000040H

; 355  : //		event_register(		125,	126,	p_whiteflash_run,		0		);
; 356  : 
; 357  : 		// LUGNARE MUSIK, EFTER UPPLADDNINGEN, BYT TILL FLUM MED FLASH
; 358  : 		event_register(		124.0f,	141,	p_aftershit_run,		0		);

	push	0
	push	OFFSET FLAT:?p_aftershit_run@@YAXPAUEVENT@@@Z ; p_aftershit_run
	push	1124925440				; 430d0000H
	push	1123549184				; 42f80000H
	call	?event_register@@YAXMMP6AXPAUEVENT@@@ZJ@Z ; event_register

; 359  : 		event_register(		138.5f,	141,	p_fadeblack_run,		0		);

	push	0
	push	OFFSET FLAT:?p_fadeblack_run@@YAXPAUEVENT@@@Z ; p_fadeblack_run
	push	1124925440				; 430d0000H
	push	1124761600				; 430a8000H
	call	?event_register@@YAXMMP6AXPAUEVENT@@@ZJ@Z ; event_register
	add	esp, 32					; 00000020H

; 360  : 
; 361  : 		glaReset();

	call	?glaReset@@YAXXZ			; glaReset

; 362  : 
; 363  : 		if( StartupFlags & STARTUP_MUSIC )

	test	DWORD PTR ?StartupFlags@@3JA, esi	; StartupFlags
	je	SHORT $L20490

; 364  : 			FMUSIC_PlaySong(mod);

	push	edi
	call	_FMUSIC_PlaySong
	add	esp, 4

; 388  : };

	npad	1

; 364  : 			FMUSIC_PlaySong(mod);

$L20490:

; 365  : 
; 366  : 		float t;
; 367  : 		do {
; 368  : 			t = glaTime();

	call	?glaTime@@YAMXZ				; glaTime
	fstp	DWORD PTR _t$20489[esp+4]

; 369  : 			glaDefaultProjection();

	call	?glaDefaultProjection@@YAXXZ		; glaDefaultProjection

; 370  : 			glaCls( 0.33f );

	push	1051260355				; 3ea8f5c3H
	call	?glaCls@@YAXM@Z				; glaCls

; 371  : 			event_run( t, 0 );

	mov	ecx, DWORD PTR _t$20489[esp+8]
	push	0
	push	ecx
	call	?event_run@@YAXMM@Z			; event_run
	add	esp, 12					; 0000000cH

; 372  : 			glaBlit();

	call	?glaBlit@@YAXXZ				; glaBlit

; 373  : 		} while( !glaExit() && t<142 );

	call	?glaExit@@YAHXZ				; glaExit
	test	eax, eax
	jne	SHORT $L20493
	fld	DWORD PTR _t$20489[esp+4]
	fcomp	DWORD PTR __real@430e0000
	fnstsw	ax
	test	ah, 5
	jnp	SHORT $L20490
$L20493:

; 374  : #endif
; 375  : 
; 376  : #ifndef NOMUSIC
; 377  : 		if( StartupFlags & STARTUP_MUSIC ) {

	test	DWORD PTR ?StartupFlags@@3JA, esi	; StartupFlags
	je	SHORT $L20494

; 378  : 			FMUSIC_FreeSong(mod);

	push	edi
	call	_FMUSIC_FreeSong
	add	esp, 4

; 379  : 			FSOUND_Close();

	call	_FSOUND_Close
$L20494:

; 380  : 		};
; 381  : #endif
; 382  : 		event_free();

	call	?event_free@@YAXXZ			; event_free

; 383  : 		glaShutdown();

	call	?glaShutdown@@YAXXZ			; glaShutdown
	pop	edi
	pop	esi
$L20571:

; 384  : 
; 385  : 	};
; 386  : 
; 387  : 	return 0;

	xor	eax, eax

; 388  : };

	ret	16					; 00000010H
_WinMain@16 ENDP
_TEXT	ENDS
END
